<?php


class Stf_role_M extends MY_Model
{

///////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////// INHERITED PROPERTIES //////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
    protected $_model_name='Stf_role_M.php';
	protected $_table_name = 'stf_roles';
    
///////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////// PUBLIC PROPERTIES /////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
        public $DB_COL_ARRAY=array();
        public $STATUS_ACTIVE='active';
        public $STATUS_UNACTIVE='unactive';
        public $ROLE_TEACHER='teacher';
        public $ROLE_ACCOUNTANT='accountant';
        public $ROLE_GARDNER='gardner';
        public $ROLE_GAURD='gaurd';




//////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////// PUBLIC FUNCTIONS /////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////
	

	function __construct (){
		parent::__construct();
	}
///////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////// SETTER FUNCTIONS //////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////

//Initialize some Componenets on new row addition (optional)
public function init_tasks($data){
//init other models
return true;   
  
}
//ADD NEW TABLE ROW IN DATABASE 
public function add_row($vals){
    //GET ALL THE FIELDS IN ARRAY  
    $db_row=  $this->grab_row($vals);        
    //PERFROM DIFFERENCT CHECKS BEFORE DATA INSERTION (OPTIONAL)
    ////////////////////////////////////////////////////////////////////////
    
    //SAVE DATA INTO DATABASE
    return $this->save_db_row($db_row);
}
	
//VALIDATE DATA BEFORE SAVING NEW RECORD
public function is_valid_data($data){
    if(empty($data['title']) ){
        return false;}
    ///////////// data is valid to insert or update
    return true;
    
}	    


//check if there is no defulat roles then create default roles.
public function validate_default_roles(){
    if($this->get_rows(array('title'=>$this->ROLE_TEACHER),'',true)<1){
        $this->add_row(array('title'=>$this->ROLE_TEACHER));
    }
    if($this->get_rows(array('title'=>$this->ROLE_ACCOUNTANT),'',true)<1){
        $this->add_row(array('title'=>$this->ROLE_ACCOUNTANT));
    }
    if($this->get_rows(array('title'=>$this->ROLE_GARDNER),'',true)<1){
        $this->add_row(array('title'=>$this->ROLE_GARDNER));
    }
    if($this->get_rows(array('title'=>$this->ROLE_GAURD),'',true)<1){
        $this->add_row(array('title'=>$this->ROLE_GAURD));
    }
}



//////////////////////////////////////////////// END OF CLASS /////////////////////
}